const game=(()=>{"use strict";let deck=[];const types=["C","D","H","S"],specials=["A","J","Q","K"];let pointsPlayers=[];const btnNewGame=document.querySelector("#btnNewGame"),btnHit=document.querySelector("#btnHit"),btnStand=document.querySelector("#btnStand"),divCardsPlayers=document.querySelectorAll(".divCards"),scorePlayers=document.querySelectorAll("small"),initializeGame=(numPlayers=2)=>{deck=createDeck(),pointsPlayers=[];for(let i=0;i<numPlayers;i++)pointsPlayers.push(0);scorePlayers.forEach(elem=>elem.innerHTML=0),divCardsPlayers.forEach(elem=>elem.innerHTML=""),btnHit.disabled=!1,btnStand.disabled=!1},createDeck=()=>(deck=[],types.forEach(type=>{for(let num=2;num<=10;num++)deck.push(`${num}${type}`);specials.forEach(special=>{deck.push(`${special}${type}`)})}),_.shuffle(deck)),hitCard=()=>{if(0===deck.length){const error="There are no cards in the deck";throw window.alert(error),error}return deck.pop()},valueCard=card=>{const value=card.substring(0,card.length-1);return isNaN(value)?"A"===value?11:10:1*value},sumPointsPlayer=(card,turnPlayer)=>(pointsPlayers[turnPlayer]=pointsPlayers[turnPlayer]+valueCard(card),scorePlayers[turnPlayer].innerHTML=pointsPlayers[turnPlayer],pointsPlayers[turnPlayer]),createCard=(card,turnPlayer)=>{const imgCard=document.createElement("img");imgCard.src=`assets/cards/${card}.png`,imgCard.classList.add("cardBJ"),divCardsPlayers[turnPlayer].append(imgCard)},determineWinner=()=>{const[pointsMinimum,pointsCPU]=pointsPlayers;setTimeout(()=>{pointsCPU===pointsMinimum?alert("Draw!"):pointsMinimum>21?alert("You Lose!"):pointsCPU>21?alert("You Win!"):pointsCPU>pointsMinimum&&alert("You Lose!")},10)},turnCPU=pointsMinimum=>{btnHit.disabled=!0,btnStand.disabled=!0;let pointsCPU=0;do{const card=hitCard();pointsCPU=sumPointsPlayer(card,pointsPlayers.length-1),createCard(card,pointsPlayers.length-1)}while(pointsCPU<=pointsMinimum&&pointsMinimum<=21);determineWinner()};return btnHit.addEventListener("click",()=>{const card=hitCard(),pointsPlayer=sumPointsPlayer(card,0);createCard(card,0),pointsPlayer>21?turnCPU(pointsPlayer):21==pointsPlayer&&turnCPU(pointsPlayer)}),btnStand.addEventListener("click",()=>{turnCPU(pointsPlayers[0])}),btnNewGame.addEventListener("click",()=>{initializeGame()}),{newGame:initializeGame}})();